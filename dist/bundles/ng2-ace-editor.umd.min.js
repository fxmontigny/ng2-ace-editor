!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("brace"),require("brace/theme/monokai"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","brace","brace/theme/monokai","@angular/forms"],e):e(((t=t||self).ng=t.ng||{},t.ng.ng2aceeditor={}),t.ng.core,null,null,t.ng.forms)}(this,function(t,i,e,o,n){"use strict";var r=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;0<=p;p--)(i=t[p])&&(s=(r<3?i(s):3<r?i(e,o,s):i(e,o))||s);return 3<r&&s&&Object.defineProperty(e,o,s),s},s=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=(a.prototype.ngOnInit=function(){this.init(),this.initEvents()},a.prototype.ngOnDestroy=function(){this.editor.destroy()},a.prototype.init=function(){this.editor.setOptions(this._options||{}),this.editor.setTheme("ace/theme/"+this._theme),this.setMode(this._mode),this.editor.setReadOnly(this._readOnly)},a.prototype.initEvents=function(){var t=this;this.editor.on("change",function(){return t.updateText()}),this.editor.on("paste",function(){return t.updateText()})},a.prototype.updateText=function(){var t=this,e=this.editor.getValue();e!==this.oldText&&(this._durationBeforeCallback?(null!=this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){t._text=e,t.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),t.timeoutSaving=null},this._durationBeforeCallback)):(this._text=e,this.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)})),this.oldText=e)},Object.defineProperty(a.prototype,"options",{set:function(t){this._options=t,this.editor.setOptions(t||{})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readOnly",{set:function(t){this._readOnly=t,this.editor.setReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"theme",{set:function(t){this._theme=t,this.editor.setTheme("ace/theme/"+t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),a.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this.editor.getSession().setMode(this._mode):this.editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),a.prototype.setText=function(t){this._text!==t&&(null==t&&(t=""),!0===this._autoUpdateContent&&(this._text=t,this.editor.setValue(t),this.editor.clearSelection()))},Object.defineProperty(a.prototype,"autoUpdateContent",{set:function(t){this._autoUpdateContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),a.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},Object.defineProperty(a.prototype,"aceEditor",{get:function(){return this.editor},enumerable:!0,configurable:!0}),r([i.Output(),s("design:type",Object)],a.prototype,"textChanged",void 0),r([i.Output(),s("design:type",Object)],a.prototype,"textChange",void 0),r([i.Input(),s("design:type",Object),s("design:paramtypes",[Object])],a.prototype,"options",null),r([i.Input(),s("design:type",Object),s("design:paramtypes",[Object])],a.prototype,"readOnly",null),r([i.Input(),s("design:type",Object),s("design:paramtypes",[Object])],a.prototype,"theme",null),r([i.Input(),s("design:type",Object),s("design:paramtypes",[Object])],a.prototype,"mode",null),r([i.Input(),s("design:type",String),s("design:paramtypes",[String])],a.prototype,"text",null),r([i.Input(),s("design:type",Object),s("design:paramtypes",[Object])],a.prototype,"autoUpdateContent",null),r([i.Input(),s("design:type",Number),s("design:paramtypes",[Number])],a.prototype,"durationBeforeCallback",null),a=r([i.Directive({selector:"[ace-editor]"}),s("design:paramtypes",[i.ElementRef,i.NgZone])],a));function a(t,e){var o=this;this.zone=e,this.textChanged=new i.EventEmitter,this.textChange=new i.EventEmitter,this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="";var n=t.nativeElement;this.zone.runOutsideAngular(function(){o.editor=ace.edit(n)}),this.editor.$blockScrolling=1/0}var u,c=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;0<=p;p--)(i=t[p])&&(s=(r<3?i(s):3<r?i(e,o,s):i(e,o))||s);return 3<r&&s&&Object.defineProperty(e,o,s),s},d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=((u=h).prototype.ngOnInit=function(){this.init(),this.initEvents()},h.prototype.ngOnDestroy=function(){this._editor.destroy()},h.prototype.init=function(){this.setOptions(this._options||{}),this.setTheme(this._theme),this.setMode(this._mode),this.setReadOnly(this._readOnly)},h.prototype.initEvents=function(){var t=this;this._editor.on("change",function(){return t.updateText()}),this._editor.on("paste",function(){return t.updateText()})},h.prototype.updateText=function(){var t=this,e=this._editor.getValue();e!==this.oldText&&(this._durationBeforeCallback?(this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){t._text=e,t.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),t.timeoutSaving=null},this._durationBeforeCallback)):(this._text=e,this.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),this._onChange(e)),this.oldText=e)},Object.defineProperty(h.prototype,"options",{set:function(t){this.setOptions(t)},enumerable:!0,configurable:!0}),h.prototype.setOptions=function(t){this._options=t,this._editor.setOptions(t||{})},Object.defineProperty(h.prototype,"readOnly",{set:function(t){this.setReadOnly(t)},enumerable:!0,configurable:!0}),h.prototype.setReadOnly=function(t){this._readOnly=t,this._editor.setReadOnly(t)},Object.defineProperty(h.prototype,"theme",{set:function(t){this.setTheme(t)},enumerable:!0,configurable:!0}),h.prototype.setTheme=function(t){this._theme=t,this._editor.setTheme("ace/theme/"+t)},Object.defineProperty(h.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),h.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this._editor.getSession().setMode(this._mode):this._editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(h.prototype,"value",{get:function(){return this.text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),h.prototype.writeValue=function(t){this.setText(t)},h.prototype.registerOnChange=function(t){this._onChange=t},h.prototype.registerOnTouched=function(t){this._onTouched=t},Object.defineProperty(h.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),h.prototype.setText=function(t){null==t&&(t=""),this._text!==t&&!0===this._autoUpdateContent&&(this._text=t,this._editor.setValue(t),this._onChange(t),this._editor.clearSelection())},Object.defineProperty(h.prototype,"autoUpdateContent",{set:function(t){this.setAutoUpdateContent(t)},enumerable:!0,configurable:!0}),h.prototype.setAutoUpdateContent=function(t){this._autoUpdateContent=t},Object.defineProperty(h.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),h.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},h.prototype.getEditor=function(){return this._editor},c([i.Output(),d("design:type",Object)],h.prototype,"textChanged",void 0),c([i.Output(),d("design:type",Object)],h.prototype,"textChange",void 0),c([i.Input(),d("design:type",Object)],h.prototype,"style",void 0),c([i.Input(),d("design:type",Object),d("design:paramtypes",[Object])],h.prototype,"options",null),c([i.Input(),d("design:type",Object),d("design:paramtypes",[Object])],h.prototype,"readOnly",null),c([i.Input(),d("design:type",Object),d("design:paramtypes",[Object])],h.prototype,"theme",null),c([i.Input(),d("design:type",Object),d("design:paramtypes",[Object])],h.prototype,"mode",null),c([i.Input(),d("design:type",String),d("design:paramtypes",[String])],h.prototype,"value",null),c([i.Input(),d("design:type",String),d("design:paramtypes",[String])],h.prototype,"text",null),c([i.Input(),d("design:type",Object),d("design:paramtypes",[Object])],h.prototype,"autoUpdateContent",null),c([i.Input(),d("design:type",Number),d("design:paramtypes",[Number])],h.prototype,"durationBeforeCallback",null),h=u=c([i.Component({selector:"ace-editor",template:"",styles:[":host { display:block;width:100%; }"],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return u}),multi:!0}]}),d("design:paramtypes",[i.ElementRef,i.NgZone])],h));function h(t,e){var o=this;this.zone=e,this.textChanged=new i.EventEmitter,this.textChange=new i.EventEmitter,this.style={},this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="",this._onChange=function(t){},this._onTouched=function(){};var n=t.nativeElement;this.zone.runOutsideAngular(function(){o._editor=ace.edit(n)}),this._editor.$blockScrolling=1/0}var f=[l,p],y=g=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;0<=p;p--)(i=t[p])&&(s=(r<3?i(s):3<r?i(e,o,s):i(e,o))||s);return 3<r&&s&&Object.defineProperty(e,o,s),s}([i.NgModule({declarations:f.slice(),imports:[],providers:[],exports:f})],g);function g(){}t.AceEditorComponent=l,t.AceEditorDirective=p,t.AceEditorModule=y,Object.defineProperty(t,"__esModule",{value:!0})});